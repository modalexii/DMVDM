---

#
# DMVDM Event Finder/Calendar Specs
# Y U NO YAML?
# *not actually intended for machine parsing*
#

Description: |
  A public subscribable Google Calendar containing information about EDM |
  events in the DMV area.

Data:
  Sources:
    Eventful: https://api.eventful.com
      Connect from: 
        - Dynamic IP US/MD
          Authenticated
          RO
    Google Calendar: https://www.googleapis.com/auth/calendar
      Connect from: 
        - Dynamic IP US/MD
          Authenticated
          RW
        - Local Application Instance
          Anonymous
          RW
  Targets:
    Google Calendar: https://www.googleapis.com/auth/calendar
      Connect from: 
        - Dynamic IP US/MD
          Authenticated
          RW
        - Public
          Anonymous
          RO
    Application Data Store: file://<data_root>/*.json
        Connect From:
          - Local Application Instance
            Anonymous
            RW
  Processing:
    Flow:
      1: Pull from Eventful to Volatile Object 'A'
      2: Pull from Google Calendar to Volatile Object B
      3: Pull from Application Data Storage to Volatile Object C
      4: Merge A with B; push each result to Google Calendar
      6: Concatenate and Deduplicate B and C to Volatile Object 'E'
      7: Overwrite C in Application Data Storage with E
    Merging:
      # Objects named as defined in Data.Processing.Flow
      For Object ('T') in A:
        T is not member of B:
          Not Member of C: |                  # has never been on the calendar
            Push to Google Calendar as Insert
          Member of C: |                      # used to be on the calendar
            Take no action
        T is member of B:
          Values of O match values of B[T]: | # already on calendar, unmodified
            Take no action
          Values of O do not match values of B[T]:
            Values of T match C[T]: |         # calendar was changed manually
              Take no action
            Values of T do not match C[T]: |  # event listing was updated
               Push to Google Calendar as Update